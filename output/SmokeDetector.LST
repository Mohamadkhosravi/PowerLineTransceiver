"File: SmokeDetector.c  Assembler  Version HGASM0202      Page 1


   1  0000              ; Generated by holtek-gcc v3.19, Sat Sep 14 17:11:44 2024
   2  0000              ; 
   3  0000              ; Configuration:
   4  0000              ;       with long instruction
   5  0000              ;       Single ROM, Multi-RAM
   6  0000              ;       bits_per_rom_unit:16
   7  0000              ;       with mp1
   8  0000              ;       with tbhp, address(0x9)
   9  0000              ;          Use tabrd-const
  10  0000              ;       
  11  0000              ; SFR address of long-instruction arch:
  12  0000              ;    mp0 = -1,1,0
  13  0000              ;    mp1 = 4,3,2
  14  0000              ;    mp2 = 14,13,12
  15  0000              ;    tbp = 9,7,8
  16  0000              ;    acc = 5
  17  0000              ;    pcl = 6
  18  0000              ;    status = 10
  19  0000              ;    bp = 11
  20  0000              ;    intc = 72
  21  0000              ;       
  22  0000              ;       
  23  0000              ; use 'tabrdc' instead of 'tabrd'
  24  0000              ;       
  25  0000              
  26  0000              #pragma translator "holtek-gcc 4.6.4" "3.19" "build 20130711"
  27  0000              ; Rebuild 718
  28  0000              
  29  0000              ir equ [2]
  30  0000              mp equ [3]
  31  0000              sbp equ [4]
  32  0000              acc equ [5]
  33  0000              bp equ [11]
  34  0000              tblp equ [7]
  35  0000              tbhp equ [9]
  36  0000              status equ [10]
  37  0000              c equ [10].0
  38  0000              ac equ [10].1
  39  0000              z equ [10].2
  40  0000              ov equ [10].3
  41  0000              cz equ [10].6
  42  0000              sc equ [10].7
  43  0000              intc equ [72]
  44  0000              
  45  0000              extern ra:byte
  46  0000              extern rb:byte
  47  0000              extern rc:byte
  48  0000              extern rd:byte
  49  0000              extern re:byte
  50  0000              extern rf:byte
  51  0000              extern rg:byte
  52  0000              extern rh:byte
  53  0000              extern _Crom2Prom:near
  54  0000              extern _Crom2PromNext:near
  55  0000              
  56  0000              RAMBANK 0 @BITDATASEC, @BITDATASEC1
  57  0000              @HCCINIT	.section 'data'
  58  0000              @HCCINIT0	.section 'data'
  59  0000              @BITDATASEC	 .section 'data'
"File: SmokeDetector.ASM  Assembler  Version HGASM0202      Page 2

  60  0000              @BITDATASEC1	 .section 'data'
  61  0000              
  62  0000              #pragma debug scope 1 1
  63  0000              	extern __DELAY3:near
  64  0000              	extern __DELAYX3:near
  65  0000              	extern __DELAYX6:near
  66  0000              	extern __DELAYY5:near
  67  0000              	extern __DELAYY3:near
  68  0000              	extern _builtin_holtek_delay_2:byte
  69  0000              ___sda0c equ [35]
  70  0000              ___sda1c equ [37]
  71  0000              ___sdsw equ [32]
  72  0000              ___sda0vos equ [36]
  73  0000              ___sda1vos equ [38]
  74  0000              public _InitOPA
  75  0000              #pragma debug scope 2 1

  25  0000              #line 25 "c:\users\tech\desktop\powerlinetransceiver\SmokeDetector\SmokeDetector.c"
  25  0000              _InitOPA .section 'code'
  25  0000              _InitOPA proc
  28  0000              #line 28 "c:\users\tech\desktop\powerlinetransceiver\SmokeDetector\SmokeDetector.c"
  28  0000  3323        	set [35].6
  29  0001              #line 29 "c:\users\tech\desktop\powerlinetransceiver\SmokeDetector\SmokeDetector.c"
  29  0001  30A3        	set [35].1
  30  0002              #line 30 "c:\users\tech\desktop\powerlinetransceiver\SmokeDetector\SmokeDetector.c"
  30  0002  3423        	clr [35].0
  33  0003              #line 33 "c:\users\tech\desktop\powerlinetransceiver\SmokeDetector\SmokeDetector.c"
  33  0003  3325        	set [37].6
  34  0004              #line 34 "c:\users\tech\desktop\powerlinetransceiver\SmokeDetector\SmokeDetector.c"
  34  0004  30A5        	set [37].1
  35  0005              #line 35 "c:\users\tech\desktop\powerlinetransceiver\SmokeDetector\SmokeDetector.c"
  35  0005  3425        	clr [37].0
  37  0006              #line 37 "c:\users\tech\desktop\powerlinetransceiver\SmokeDetector\SmokeDetector.c"
  37  0006  3420        	clr [32].0
  38  0007              #line 38 "c:\users\tech\desktop\powerlinetransceiver\SmokeDetector\SmokeDetector.c"
  38  0007  34A0        	clr [32].1
  39  0008              #line 39 "c:\users\tech\desktop\powerlinetransceiver\SmokeDetector\SmokeDetector.c"
  39  0008  3120        	set [32].2
  40  0009              #line 40 "c:\users\tech\desktop\powerlinetransceiver\SmokeDetector\SmokeDetector.c"
  40  0009  35A0        	clr [32].3
  41  000A              #line 41 "c:\users\tech\desktop\powerlinetransceiver\SmokeDetector\SmokeDetector.c"
  41  000A  3620        	clr [32].4
  48  000B              #line 48 "c:\users\tech\desktop\powerlinetransceiver\SmokeDetector\SmokeDetector.c"
  48  000B  0F1B        	mov a,27
  48  000C  0080     E  	mov rb,a
  48  000D  0700     E  	mov a,rb
  48  000E  0E07        	and a,7
  48  000F  0080     E  	mov rc,a
  48  0010  0700     E  	mov a,rc
  48  0011  0C03        	xor a,3
  48  0012  0080     E  	mov ra,a
  48  0013  0F00        	mov a,0
  48  0014  0280     E  	subm a,ra
  48  0015  0F80        	mov a,128
  48  0016  0680     E  	andm a,ra
  48  0017  37A4        	clr [36].7
  48  0018  0700     E  	mov a,ra
  48  0019  05A4        	orm a,[36]
  49  001A              #line 49 "c:\users\tech\desktop\powerlinetransceiver\SmokeDetector\SmokeDetector.c"
  49  001A  0F01        	mov a,1
"File: SmokeDetector.c  Assembler  Version HGASM0202      Page 3

  49  001B  0080     E  	mov ra,a
  49  001C  0700     E  	mov a,rc
  49  001D  0A05        	sub a,5
  49  001E  3D0A        	sz z
  49  001F  2800     R  	jmp _L2
  49  0020              #line 49 "c:\users\tech\desktop\powerlinetransceiver\SmokeDetector\SmokeDetector.c"
  49  0020  1F00     E  	clr ra
  49  0021              _L2:
  49  0021  1900     E  	rra ra
  49  0022  1985        	rr acc
  49  0023  0EC0        	and a,0c0h
  49  0024  0080     E  	mov ra,a
  49  0025  3724        	clr [36].6
  49  0026  0700     E  	mov a,ra
  49  0027  05A4        	orm a,[36]
  50  0028              #line 50 "c:\users\tech\desktop\powerlinetransceiver\SmokeDetector\SmokeDetector.c"
  50  0028  0F38        	mov a,56
  50  0029  0680     E  	andm a,rb
  50  002A  0700     E  	mov a,rb
  50  002B  0C18        	xor a,24
  50  002C  0080     E  	mov ra,a
  50  002D  0F00        	mov a,0
  50  002E  0280     E  	subm a,ra
  50  002F  0F80        	mov a,128
  50  0030  0680     E  	andm a,ra
  50  0031  37A6        	clr [38].7
  50  0032  0700     E  	mov a,ra
  50  0033  05A6        	orm a,[38]
  51  0034              #line 51 "c:\users\tech\desktop\powerlinetransceiver\SmokeDetector\SmokeDetector.c"
  51  0034  0F01        	mov a,1
  51  0035  0080     E  	mov ra,a
  51  0036  0700     E  	mov a,rb
  51  0037  0A28        	sub a,40
  51  0038  3D0A        	sz z
  51  0039  2800     R  	jmp _L3
  51  003A  1F00     E  	clr ra
  51  003B              _L3:
  51  003B  1900     E  	rra ra
  51  003C  1985        	rr acc
  51  003D  0EC0        	and a,0c0h
  51  003E  0080     E  	mov ra,a
  51  003F  3726        	clr [38].6
  51  0040  0700     E  	mov a,ra
  51  0041  05A6        	orm a,[38]
  51  0042  0003        	ret
  51  0043              _InitOPA endp
  51  0043              #line 51 "c:\users\tech\desktop\powerlinetransceiver\SmokeDetector\SmokeDetector.c"
  51  0043              #pragma debug scope 1 1
  51  0043              public _InitISINK
  51  0043              #pragma debug scope 3 1
  62  0043              #line 62 "c:\users\tech\desktop\powerlinetransceiver\SmokeDetector\SmokeDetector.c"
  62  0000              _InitISINK .section 'code'
  62  0000              _InitISINK proc
  62  0000  0003        	ret
  62  0001              _InitISINK endp
  62  0001              #line 62 "c:\users\tech\desktop\powerlinetransceiver\SmokeDetector\SmokeDetector.c"
  62  0001              #pragma debug scope 1 1
  62  0001              public _CalibrateOPA0
  62  0001              #pragma debug scope 4 1
  72  0001              #line 72 "c:\users\tech\desktop\powerlinetransceiver\SmokeDetector\SmokeDetector.c"
"File: SmokeDetector.c  Assembler  Version HGASM0202      Page 4

  72  0000              _CalibrateOPA0 .section 'code'
  72  0000              _CalibrateOPA0 proc
  77  0000              #line 77 "c:\users\tech\desktop\powerlinetransceiver\SmokeDetector\SmokeDetector.c"
  77  0000  33A4        	set [36].7
  78  0001              #line 78 "c:\users\tech\desktop\powerlinetransceiver\SmokeDetector\SmokeDetector.c"
  78  0001  3324        	set [36].6
  78  0002              _L14:
  82  0002              #line 82 "c:\users\tech\desktop\powerlinetransceiver\SmokeDetector\SmokeDetector.c"
  82  0002  3AA3        	snz [35].5
  82  0003  2800     R  	jmp _L14
  82  0004  1F00     E  	clr ra
  82  0005              _L16:
  86  0005              #line 86 "c:\users\tech\desktop\powerlinetransceiver\SmokeDetector\SmokeDetector.c"
  86  0005  0700     E  	mov a,ra
  86  0006  05A4        	orm a,[36]
  88  0007              #line 88 "c:\users\tech\desktop\powerlinetransceiver\SmokeDetector\SmokeDetector.c"
  88  0007  3EA3        	sz [35].5
  88  0008  2800     R  	jmp _L21
  84  0009              #line 84 "c:\users\tech\desktop\powerlinetransceiver\SmokeDetector\SmokeDetector.c"
  84  0009  1480     E  	inc ra
  84  000A  0700     E  	mov a,ra
  84  000B  0A40        	sub a,64
  84  000C  390A        	snz z
  84  000D  2800     R  	jmp _L16
  84  000E  2800     R  	jmp _L15
  84  000F              _L21:
  84  000F  0700     E  	mov a,ra
  84  0010  0080     E  	mov rb,a
  84  0011              _L15:
  96  0011              #line 96 "c:\users\tech\desktop\powerlinetransceiver\SmokeDetector\SmokeDetector.c"
  96  0011  0F3F        	mov a,63
  96  0012  05A4        	orm a,[36]
  96  0013              _L18:
  97  0013              #line 97 "c:\users\tech\desktop\powerlinetransceiver\SmokeDetector\SmokeDetector.c"
  97  0013  3EA3        	sz [35].5
  97  0014  2800     R  	jmp _L18
  97  0015  0F3F        	mov a,63
  97  0016  0080     E  	mov ra,a
  97  0017              _L20:
 102  0017              #line 102 "c:\users\tech\desktop\powerlinetransceiver\SmokeDetector\SmokeDetector.c"
 102  0017  0700     E  	mov a,ra
 102  0018  0E3F        	and a,63
 102  0019  0080     E  	mov rc,a
 102  001A  0700     E  	mov a,rc
 102  001B  05A4        	orm a,[36]
 103  001C              #line 103 "c:\users\tech\desktop\powerlinetransceiver\SmokeDetector\SmokeDetector.c"
 103  001C  3EA3        	sz [35].5
 103  001D  2800     R  	jmp _L19
 111  001E              #line 111 "c:\users\tech\desktop\powerlinetransceiver\SmokeDetector\SmokeDetector.c"
 111  001E  0700     E  	mov a,rb
 111  001F  0380     E  	addm a,ra
 111  0020  1800     E  	rla ra
 111  0021  0E01        	and a,1
 111  0022  0080     E  	mov rb,a
 111  0023  0700     E  	mov a,rb
 111  0024  0380     E  	addm a,ra
 111  0025  1A00     E  	rlca ra
 111  0026  1B80     E  	rrc ra
 112  0027              #line 112 "c:\users\tech\desktop\powerlinetransceiver\SmokeDetector\SmokeDetector.c"
 112  0027  0F3F        	mov a,63
"File: SmokeDetector.c  Assembler  Version HGASM0202      Page 5

 112  0028  0680     E  	andm a,ra
 112  0029  0700     E  	mov a,ra
 112  002A  05A4        	orm a,[36]
 112  002B  2800     R  	jmp _L26
 112  002C              _L19:
  99  002C              #line 99 "c:\users\tech\desktop\powerlinetransceiver\SmokeDetector\SmokeDetector.c"
  99  002C  1580     E  	dec ra
 108  002D              #line 108 "c:\users\tech\desktop\powerlinetransceiver\SmokeDetector\SmokeDetector.c"
 108  002D  2800     R  	jmp _L20
 108  002E              _L26:
 108  002E  0003        	ret
 108  002F              _CalibrateOPA0 endp
 108  002F              #line 108 "c:\users\tech\desktop\powerlinetransceiver\SmokeDetector\SmokeDetector.c"
 108  002F              #pragma debug scope 1 1
 108  002F              public _CalibrateOPA1
 108  002F              #pragma debug scope 5 1
 117  002F              #line 117 "c:\users\tech\desktop\powerlinetransceiver\SmokeDetector\SmokeDetector.c"
 117  0000              _CalibrateOPA1 .section 'code'
 117  0000              _CalibrateOPA1 proc
 122  0000              #line 122 "c:\users\tech\desktop\powerlinetransceiver\SmokeDetector\SmokeDetector.c"
 122  0000  33A6        	set [38].7
 123  0001              #line 123 "c:\users\tech\desktop\powerlinetransceiver\SmokeDetector\SmokeDetector.c"
 123  0001  3326        	set [38].6
 123  0002              _L29:
 127  0002              #line 127 "c:\users\tech\desktop\powerlinetransceiver\SmokeDetector\SmokeDetector.c"
 127  0002  3AA5        	snz [37].5
 127  0003  2800     R  	jmp _L29
 127  0004  1F00     E  	clr ra
 127  0005              _L31:
 131  0005              #line 131 "c:\users\tech\desktop\powerlinetransceiver\SmokeDetector\SmokeDetector.c"
 131  0005  0700     E  	mov a,ra
 131  0006  05A6        	orm a,[38]
 133  0007              #line 133 "c:\users\tech\desktop\powerlinetransceiver\SmokeDetector\SmokeDetector.c"
 133  0007  3EA5        	sz [37].5
 133  0008  2800     R  	jmp _L36
 129  0009              #line 129 "c:\users\tech\desktop\powerlinetransceiver\SmokeDetector\SmokeDetector.c"
 129  0009  1480     E  	inc ra
 129  000A  0700     E  	mov a,ra
 129  000B  0A40        	sub a,64
 129  000C  390A        	snz z
 129  000D  2800     R  	jmp _L31
 129  000E  2800     R  	jmp _L30
 129  000F              _L36:
 129  000F  0700     E  	mov a,ra
 129  0010  0080     E  	mov rb,a
 129  0011              _L30:
 141  0011              #line 141 "c:\users\tech\desktop\powerlinetransceiver\SmokeDetector\SmokeDetector.c"
 141  0011  0F3F        	mov a,63
 141  0012  05A6        	orm a,[38]
 141  0013              _L33:
 142  0013              #line 142 "c:\users\tech\desktop\powerlinetransceiver\SmokeDetector\SmokeDetector.c"
 142  0013  3EA5        	sz [37].5
 142  0014  2800     R  	jmp _L33
 142  0015  0F3F        	mov a,63
 142  0016  0080     E  	mov ra,a
 142  0017              _L35:
 147  0017              #line 147 "c:\users\tech\desktop\powerlinetransceiver\SmokeDetector\SmokeDetector.c"
 147  0017  0700     E  	mov a,ra
 147  0018  0E3F        	and a,63
 147  0019  0080     E  	mov rc,a
"File: SmokeDetector.c  Assembler  Version HGASM0202      Page 6

 147  001A  0700     E  	mov a,rc
 147  001B  05A6        	orm a,[38]
 148  001C              #line 148 "c:\users\tech\desktop\powerlinetransceiver\SmokeDetector\SmokeDetector.c"
 148  001C  3EA5        	sz [37].5
 148  001D  2800     R  	jmp _L34
 156  001E              #line 156 "c:\users\tech\desktop\powerlinetransceiver\SmokeDetector\SmokeDetector.c"
 156  001E  0700     E  	mov a,rb
 156  001F  0380     E  	addm a,ra
 156  0020  1800     E  	rla ra
 156  0021  0E01        	and a,1
 156  0022  0080     E  	mov rb,a
 156  0023  0700     E  	mov a,rb
 156  0024  0380     E  	addm a,ra
 156  0025  1A00     E  	rlca ra
 156  0026  1B80     E  	rrc ra
 157  0027              #line 157 "c:\users\tech\desktop\powerlinetransceiver\SmokeDetector\SmokeDetector.c"
 157  0027  0F3F        	mov a,63
 157  0028  0680     E  	andm a,ra
 157  0029  0700     E  	mov a,ra
 157  002A  05A6        	orm a,[38]
 157  002B  2800     R  	jmp _L41
 157  002C              _L34:
 144  002C              #line 144 "c:\users\tech\desktop\powerlinetransceiver\SmokeDetector\SmokeDetector.c"
 144  002C  1580     E  	dec ra
 153  002D              #line 153 "c:\users\tech\desktop\powerlinetransceiver\SmokeDetector\SmokeDetector.c"
 153  002D  2800     R  	jmp _L35
 153  002E              _L41:
 153  002E  0003        	ret
 153  002F              _CalibrateOPA1 endp
 153  002F              #line 153 "c:\users\tech\desktop\powerlinetransceiver\SmokeDetector\SmokeDetector.c"
 153  002F              #pragma debug scope 1 1
 153  002F              public _InitSmokeDetection
 153  002F              #pragma debug scope 6 1
 162  002F              #line 162 "c:\users\tech\desktop\powerlinetransceiver\SmokeDetector\SmokeDetector.c"
 162  0000              _InitSmokeDetection .section 'code'
 162  0000              _InitSmokeDetection proc
 163  0000              #line 163 "c:\users\tech\desktop\powerlinetransceiver\SmokeDetector\SmokeDetector.c"
 163  0000  2000     R  	call _InitOPA
 165  0001              #line 165 "c:\users\tech\desktop\powerlinetransceiver\SmokeDetector\SmokeDetector.c"
 165  0001  2000     E  	call _ADCInit
 165  0002  0003        	ret
 165  0003              _InitSmokeDetection endp
 165  0003              #line 165 "c:\users\tech\desktop\powerlinetransceiver\SmokeDetector\SmokeDetector.c"
 165  0003              #pragma debug scope 1 1
 165  0003              public _CheckSmokeLevel
 165  0003              #pragma debug scope 7 1
 170  0003              #line 170 "c:\users\tech\desktop\powerlinetransceiver\SmokeDetector\SmokeDetector.c"
 170  0000              _CheckSmokeLevel .section 'code'
 170  0000              _CheckSmokeLevel proc
 170  0000  0003        	ret
 170  0001              _CheckSmokeLevel endp
 170  0001              #line 170 "c:\users\tech\desktop\powerlinetransceiver\SmokeDetector\SmokeDetector.c"
 170  0001              #pragma debug scope 1 1
 170  0001              #pragma debug struct_end
 170  0001              #pragma debug struct_end
 170  0001              #pragma debug union_end
 170  0001              #pragma debug union_end
 170  0001              #pragma debug variable 43 1 ___sdsw "__sdsw" 1
 170  0001              #pragma debug struct_end
 170  0001              #pragma debug struct_end
"File: SmokeDetector.c  Assembler  Version HGASM0202      Page 7

 170  0001              #pragma debug union_end
 170  0001              #pragma debug union_end
 170  0001              #pragma debug variable 45 1 ___sda0c "__sda0c" 1
 170  0001              #pragma debug struct_end
 170  0001              #pragma debug struct_end
 170  0001              #pragma debug union_end
 170  0001              #pragma debug union_end
 170  0001              #pragma debug variable 47 1 ___sda0vos "__sda0vos" 1
 170  0001              #pragma debug struct_end
 170  0001              #pragma debug struct_end
 170  0001              #pragma debug union_end
 170  0001              #pragma debug union_end
 170  0001              #pragma debug variable 49 1 ___sda1c "__sda1c" 1
 170  0001              #pragma debug struct_end
 170  0001              #pragma debug struct_end
 170  0001              #pragma debug union_end
 170  0001              #pragma debug union_end
 170  0001              #pragma debug variable 51 1 ___sda1vos "__sda1vos" 1
 170  0001              extern _ADCInit:near
 170  0001              
 170  0001              ; 
 170  0001              ; Generated by holtek-gcc v3.19, Sat Sep 14 17:11:44 2024
 170  0001              ; Rebuild 718
 170  0001              ; end of file


        0 Errors, 0